<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body> 
    <h1 id="app">Count Down from 10</h1>
    <div class="alert alert-success" role="alert">
        <script>
            var count; // Variable count, ihr Wert ist noch undefined.
            var maxCount; // max count; ganze Zahl (integer); in Sekunden
            var timerId; // Wird zum Stoppen von setInterval() verwendet.

            function startCountdown() {
                stopCountdown(); // Falls es schon einen Timer gibt: zuerst stoppen

                // maxCount und count in Anfangszustand setzen und Zeit anzeigen
                maxCount = getSecondsInput();
                count = maxCount;
                setTimeDisplay();

                // Verwende die Referenz 'updateCounter', um die Funktion für später zu registrieren.
                timerId = setInterval(updateCounter, 1000); // Jede Sekunde: aktualisiere den Zähler und die Anzeige.
            } 
            
            function stopCountdown() {
                // JavaScript Funktion clearInterval() aufrufen.
                clearInterval(timerId);
            }

            function updateCounter() {
                count = count - 1; // Kurzschreibweise: count--;
                setTimeDisplay();

                if (count === 0) { // count is the same type as 0 AND count equals 0
                    stopCountdown();
                    setDisplay("Fertig!");
                    // Audio abspielen
                    // Ausruf, Hinweis anzeigen
                }
            }

            function setTimeDisplay() {
                setDisplay(secondsToTimeString(count));
            }

            function setDisplay(info) { // 'info' kann z. Bsp. ein String oder eine Zahl sein.
                document.getElementById("display").innerHTML = info;
            }

            function getSecondsInput() {
                let value = document.getElementById("seconds").value; // 'value' ist ein String.
                return parseInt(value); // Mit parseInt() den String in eine ganze Zahl umwandeln.
            }

            function secondsToTimeString(seconds) {
                let minutes = Math.floor(seconds / 60);
                let hours = Math.floor(minutes / 60);

                return timeToString(hours, minutes, seconds % 60);
            }

            function timeToString(hours, minutes, seconds) {
                return hours.toString().padStart(2, "0") + ":" + 
                       minutes.toString().padStart(2, "0") + ":" + 
                       seconds.toString().padStart(2, "0");
            }
        </script>

        <p id="display" style="font-size: xx-large;">&nbsp;</p>

        <button type="button" 
                class="btn btn-primary"
                id="startButton"
                onclick="startCountdown();">START</button>

        <button type="button" 
                class="btn btn-success"
                id="stopButton"
                onclick="stopCountdown();">STOP</button>

        <form>
            <input type="number" id="seconds" value="20" style="width:50px; margin-top:20px;">
            <label>sec</label>
        </form>
    </div>

</body>
</html>






